<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Introduction: Report generation using R Markdown &middot; Code As Manuscript
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="theme-base-0d">

    <div class="sidebar">
  <div class="container"> <!--sidebar-sticky? I deleted it from here-->
    <div class="sidebar-about">
      <h2>
        <a href="">
          Code As Manuscript
        </a>
      </h2>
      <p class="lead">Writing your code and analyses as if <i>it</i> was the manuscript.</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
          
        
      
        
          
            
              <a class="sidebar-nav-item" href="/">About</a>
            
          
        
      
        
          
            
              <a class="sidebar-nav-item" href="/gps/">GPS</a>
            
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
            
              <a class="sidebar-nav-item" href="/lessons/">Lessons</a>
            
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

      <a class="sidebar-nav-item" href="https://github.com/codeasmanuscript">GitHub</a>
    </nav>

    <p>&copy; 2015. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="page">
  <h1 class="page-title">Introduction: Report generation using R Markdown</h1>
  <p>A recent feature to using R is the incredibly powerful and incredibly useful
package <a href="http://rmarkdown.rstudio.com/"><code>rmarkdown</code></a> (and by extension the
package <a href="http://yihui.name/knitr/"><code>knitr</code></a>). R Markdown allows you to
dynamically generate a report (could be a manuscript or your thesis!) where R
automatically inserts tables, figures, numbers, and citations into your document
so that you never again have to copy and paste anything! You can create Word,
HTML, or PDF files from your <code>.Rmd</code> (or R Markdown) file, letting you
collaborate with the least tech-savvy individuals. It also dramatically cuts
down on your time writing your manuscript or thesis because as you write it up
you are also putting in the R code to create everything that will be in the
report.  In one step you go for analysis to report! No more worries about fixing
up your report after a co-author suggests to re-do a part of the analysis!</p>

<h1 id="learning-objectives">Learning objectives:</h1>

<ol>
  <li>Write in markdown</li>
  <li>Use YAML and R code chunk options</li>
  <li>Create tables and figures</li>
  <li>Ultimately, generate a dynamic report in either Word or HTML.</li>
</ol>

<h1 id="materials-for-this-lesson">Materials for this lesson:</h1>

<ul>
  <li><a href="slides/">Slides</a></li>
  <li><a href="cheatsheet/">Cheatsheet</a></li>
  <li><a href="assignment/">Assignment</a></li>
</ul>

<p>More resources on R Markdown can be found <a href="../resources/">here</a>.</p>

<h1 id="generating-a-dynamic-report">Generating a dynamic report!</h1>

<h2 id="yaml-metadata">YAML metadata</h2>

<p>This is the part that tells R how to generate the document. 
<a href="https://en.wikipedia.org/wiki/YAML">YAML</a> is a human-readable data-encoding
format. What that means is it makes it so you can easily type up commands that
both you and the computer will understand. A typical YAML metadata looks like:</p>

<h2 id="section">```</h2>
<p>title: “Introducing R Markdown”
published: true
author: “Luke Johnston”
date: “July 23, 2015”
output: html_document
—
```</p>

<p>Note the starting and ending <code>---</code> ‘tags’, which tell R that this is a YAML
block.</p>

<h2 id="markdown-syntax">Markdown syntax</h2>

<p>Markdown is called a ‘markup language’ that allows you to convert to a vast
number of file formats (html, word, pdf, etc). It’s a ‘language’ because you use
specific characters or symbols to represent something else in another file
format after conversion.  For instance, see below:</p>

<p>```
# This is a header</p>

<h2 id="this-is-a-second-level-header">This is a second-level header</h2>

<p>Let’s show some <strong>bolding</strong> and <em>italics</em>. Or why not show a link to <a href="http://google.ca">Google</a>. Some times you may need to show <code>code</code> snippets. Or a code block, either using tab or three backticks (```):</p>

<pre><code>code &lt;- here
</code></pre>

<p>Sometimes we need a list:</p>

<ul>
  <li>Item 1</li>
  <li>Item 2</li>
</ul>

<p>Or a numbered list:</p>

<ol>
  <li>Item 1</li>
  <li>Item 2</li>
</ol>

<p>This is a citation @Joe2005 (not converted). Or an image (not converted):</p>

<p><img src="path/to/image" alt="Caption text" /></p>

<p>```</p>

<h2 id="r-markdown">R Markdown</h2>

<p>R Markdown is Markdown and R combined! So you get the simplicity of Markdown
with the power of R! Within the R Markdown document, you can insert R code
chunks to input and create the output into the document. They look like this:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">testCode <span class="o">&lt;-</span> <span class="m">1</span><span class="o">:</span><span class="m">10</span>
    <span class="kp">print</span><span class="p">(</span>testCode<span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre></div>

<p>You’ll notice that the code chunk printed off 1 to 10 and put it into the
document. I didn’t do that, R did it for me!</p>

<p>The code chunks have several options that allow you to customize how you want R
to treat the chunk. Most options require either a <code>TRUE</code> or <code>FALSE</code> as the
setting. Two commonly used options include:</p>

<ul>
  <li><code>eval</code>: Whether or not R runs the code chunk</li>
  <li><code>echo</code>: Whether the code chunk is kept in the converted format (eg. Word or
HTML)</li>
</ul>

<p>There are also options <code>message</code>, <code>warning</code>, <code>error</code>.</p>

<p>You can also include inline R code snippets that pastes the output directly into
the paragraph. Use the markdown syntax for inline code, except with an r
infront like ` testing `, which creates testing.</p>

<h2 id="creating-tables-using-r-code">Creating tables using R code</h2>

<p>Within Markdown is the ability to create tables the convert into the other
document formats, such as Word or HTML. Using the <code>pander()</code> command from the 
<code>pander</code> package, you can create these Markdown tables of an R object. In
addition to the <code>pander()</code> command, there is an extra step to take to get the
object to print: including a <code>results = 'asis'</code> option in the code chunk. Here
is an example:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kn">library</span><span class="p">(</span>pander<span class="p">)</span>
pander<span class="p">(</span><span class="kp">head</span><span class="p">(</span>cars<span class="p">),</span> caption <span class="o">=</span> <span class="s">&#39;First few rows of the cars dataset.&#39;</span><span class="p">,</span>
       style <span class="o">=</span> <span class="s">&#39;rmarkdown&#39;</span><span class="p">)</span></code></pre></div>

<table>
  <thead>
    <tr>
      <th style="text-align: center">speed</th>
      <th style="text-align: center">dist</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">4</td>
      <td style="text-align: center">2</td>
    </tr>
    <tr>
      <td style="text-align: center">4</td>
      <td style="text-align: center">10</td>
    </tr>
    <tr>
      <td style="text-align: center">7</td>
      <td style="text-align: center">4</td>
    </tr>
    <tr>
      <td style="text-align: center">7</td>
      <td style="text-align: center">22</td>
    </tr>
    <tr>
      <td style="text-align: center">8</td>
      <td style="text-align: center">16</td>
    </tr>
    <tr>
      <td style="text-align: center">9</td>
      <td style="text-align: center">10</td>
    </tr>
  </tbody>
</table>

<p>Table: First few rows of the cars dataset.</p>

<h2 id="figures-in-the-markdown-file">Figures in the markdown file</h2>

<p>Just like you can get R to create a table, you can also get R to create a
figure. There are several chunk options for creating figures, including <code>fig.height</code>, <code>fig.width</code>, <code>dpi</code>, and <code>fig.cap</code>.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">plot<span class="p">(</span>cars<span class="p">)</span></code></pre></div>

<p><img src="/images/fig-1.png" alt="Scatterplot of speed and distance." /> </p>

<h2 id="bibliography">Bibliography</h2>

<p>If you want to cite articles or references, use the <code>@</code> tag with the author key
(eg. <code>@Smith1995</code>). In addition to the <code>@</code> tag, you need to include the
following YAML option to the YAML header, with the location of the bibliography
file on your computer.</p>

<p><code>
bibliography: /path/to/file
</code></p>

<h2 id="figure-and-table-labels">Figure and table labels</h2>

<blockquote>
  <p><em>Note: The below labels don’t work with conversion on the website. See <a href="intro.html">this
link</a> for the HTML converted version that chows these labels 
working.</em></p>
</blockquote>

<p>Often you want to include figure or caption labels that you can cite easily in
your document. So, let’s create two labels for a table and a figure using the
<code>captioner</code> command from the <code>captioner</code> package. First we set the prefix for
the caption:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kn">library</span><span class="p">(</span>captioner<span class="p">)</span>
figNums <span class="o">&lt;-</span> captioner<span class="p">(</span>prefix <span class="o">=</span> <span class="s">&#39;Figure&#39;</span><span class="p">)</span>
tabNums <span class="o">&lt;-</span> captioner<span class="p">(</span>prefix <span class="o">=</span> <span class="s">&#39;Table&#39;</span><span class="p">)</span></code></pre></div>

<p>Then, we store the caption label and caption title (including the <code>results='hide'</code>
code chunk option, as these commands will print them to the output):</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">figNums<span class="p">(</span>name <span class="o">=</span> <span class="s">&#39;figCars&#39;</span><span class="p">,</span> caption <span class="o">=</span> <span class="s">&#39;First few rows of the cars dataset.&#39;</span><span class="p">,</span>
        display <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
tabNums<span class="p">(</span>name <span class="o">=</span> <span class="s">&#39;tabCars&#39;</span><span class="p">,</span> caption <span class="o">=</span> <span class="s">&#39;Scatterplot of speed and distance.&#39;</span><span class="p">,</span>
        display <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span></code></pre></div>

<p>Now we can cite them in-text, using the ` Figure  1 <code>, 
which then looks like Figure  1. And with the 
plot, include this option in the plot code chunk </code> Figure  1: First few rows of the cars dataset. `:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">plot<span class="p">(</span>cars<span class="p">)</span></code></pre></div>

<p><img src="/images/plotCap-1.png" alt="Figure  1: First few rows of the cars dataset." /> </p>

<p>Or with a table using ` Table  1 ` to show 
Table  1.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">set.caption<span class="p">(</span>tabNums<span class="p">(</span><span class="s">&#39;tabCars&#39;</span><span class="p">))</span>
pander<span class="p">(</span><span class="kp">head</span><span class="p">(</span>cars<span class="p">),</span> style <span class="o">=</span> <span class="s">&#39;rmarkdown&#39;</span><span class="p">)</span></code></pre></div>

<table>
  <thead>
    <tr>
      <th style="text-align: center">speed</th>
      <th style="text-align: center">dist</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">4</td>
      <td style="text-align: center">2</td>
    </tr>
    <tr>
      <td style="text-align: center">4</td>
      <td style="text-align: center">10</td>
    </tr>
    <tr>
      <td style="text-align: center">7</td>
      <td style="text-align: center">4</td>
    </tr>
    <tr>
      <td style="text-align: center">7</td>
      <td style="text-align: center">22</td>
    </tr>
    <tr>
      <td style="text-align: center">8</td>
      <td style="text-align: center">16</td>
    </tr>
    <tr>
      <td style="text-align: center">9</td>
      <td style="text-align: center">10</td>
    </tr>
  </tbody>
</table>

<p>Table: Table  1: Scatterplot of speed and distance.</p>

<h2 id="generating-this-rmd-document-and-sharing-with-others">Generating this <code>.Rmd</code> document and sharing with others</h2>

<p>If you download the <a href="https://github.com/codeasmanuscript/workshops/tree/master/lessons/rmarkdown/intro.Rmd">source <code>.Rmd</code> version of this document</a>,
you can recreate the web version and the HTML version by using these commands
below (note the <code>eval=FALSE</code> in the code chunk):</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kn">library</span><span class="p">(</span>rmarkdown<span class="p">)</span>
<span class="c1">## html</span>
render<span class="p">(</span><span class="s">&#39;intro.Rmd&#39;</span><span class="p">,</span> <span class="s">&#39;html_document&#39;</span><span class="p">)</span>
<span class="c1">## md version on the website</span>
render<span class="p">(</span><span class="s">&#39;intro.Rmd&#39;</span><span class="p">,</span> <span class="s">&#39;md_document&#39;</span><span class="p">)</span></code></pre></div>

<p>R Markdown can also make it very easy to collaborate with people who may not be
as tech-savvy and who don’t know much outside of Microsoft Word by converting
all your <code>.Rmd</code> files into Word! Try it out:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">render<span class="p">(</span><span class="s">&#39;intro.Rmd&#39;</span><span class="p">,</span> <span class="s">&#39;word_document&#39;</span><span class="p">)</span></code></pre></div>

<p>Using R Markdown can help with making your code easier to understand. That’s
because as you type out your code, you are also typing explanations and reasons
in markdown. You can then easily create documents, manuscripts, theses, and
other file types that others (and your future self) can read to understand your
code and your analysis better. Combine R and R Markdown with Git and GitHub and
you have a powerful tool for making your work better, more scientifically
rigorous and transparent, and share-able so others can use your work easily!</p>

</div>

    </div>

  </body>
</html>
