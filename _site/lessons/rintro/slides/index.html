<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Introduction to R &middot; Code As Manuscript
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="theme-base-0d">

    <div class="sidebar">
  <div class="container"> <!--sidebar-sticky? I deleted it from here-->
    <div class="sidebar-about">
      <h2>
        <a href="">
          Code As Manuscript
        </a>
      </h2>
      <p class="lead">Writing your code and analyses as if <i>it</i> was the manuscript.</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
          
        
      
        
          
            
              <a class="sidebar-nav-item" href="/">About</a>
            
          
        
      
        
          
            
              <a class="sidebar-nav-item" href="/gps/">GPS</a>
            
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
            
              <a class="sidebar-nav-item" href="/lessons/">Lessons</a>
            
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

      <a class="sidebar-nav-item" href="https://github.com/codeasmanuscript">GitHub</a>
    </nav>

    <p>&copy; 2015. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="page">
  <h1 class="page-title">Introduction to R</h1>
  <h1 id="welcome-to-our-r-introduction-workshop">Welcome to our R introduction workshop</h1>

<h2 id="purpose">Purpose:</h2>

<p>To introduce you to the R language and common data manipulations used in R</p>

<h1 id="what-is-r-and-why-do-i-need-to-learn-it">What is R and why do I need to learn it?</h1>

<p>R is an object-oritented programming language for statistical computing and graphics.</p>

<p>Benefits of R:</p>

<ol>
  <li>Easily extendible through <strong>FREE</strong> R packages</li>
  <li>Active community (lots on online help)</li>
  <li>Able to produce publication-quality graphs, and dynamic and interactive graphs with additional packages (did I mention they were <strong>FREE</strong>??)</li>
  <li>For computationally intensive tasks, R objects can be manipulated with C, C++, Java, .NET or Python code </li>
  <li>Has it’s own flavor of Markdown, making R code easily documented and shareable (which you will be learning in another lesson)</li>
</ol>

<h2 id="learning-objectives">Learning objectives</h2>

<p>After this workshop, our expectation is that you will be able to:</p>

<ol>
  <li>Understand the “grammar” of the R language</li>
  <li>Import and export data into R</li>
  <li>View data in R and perform basic calculations &amp; manipulations</li>
  <li>Make and use a basic R function </li>
  <li>Understand and use the useful built-in loop functions</li>
</ol>

<h1 id="materials-for-this-lesson">Materials for this lesson:</h1>

<ul>
  <li><a href="slides/">Slides</a></li>
  <li><a href="cheatsheet/">Cheatsheet</a></li>
  <li><a href="assignment/">Assignment</a></li>
  <li><a href="answer">Assignment Answers</a></li>
</ul>

<p>Other resources can be found <a href="../resources/">here</a></p>

<h1 id="the-r-language">The R language</h1>

<p>R is an object-oriented programing language, meaning everything we encounter in R is an object. </p>

<p>R has a 5 basic classes of objects:</p>

<ul>
  <li>Character</li>
  <li>Numeric</li>
  <li>Integer</li>
  <li>Complex</li>
  <li>Logical</li>
</ul>

<p>R has 5 different types of objects:</p>

<ul>
  <li>Vectors</li>
  <li>Lists</li>
  <li>Matrices</li>
  <li>Factors</li>
  <li>Dataframes</li>
</ul>

<p>Thus you could have a logical vector, a character dataframe, a numeric matrix, etc. </p>

<h1 id="vectors">Vectors</h1>

<p>The most basic object is a vector. A vector is a sequence of objects of the same class. We can make vectors using the <code>c()</code> function.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">a <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="m">0.4</span><span class="p">,</span> <span class="m">1.2</span><span class="p">)</span>         <span class="c1"># numeric</span>
b <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="kc">TRUE</span><span class="p">,</span> <span class="kc">FALSE</span><span class="p">)</span>      <span class="c1"># logical</span>
<span class="kt">c</span> <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="s">&quot;c&quot;</span><span class="p">)</span>      <span class="c1"># character</span>
d <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="m">1L</span><span class="p">,</span> <span class="m">2L</span><span class="p">)</span>           <span class="c1"># integer</span>
e <span class="o">&lt;-</span> <span class="m">1</span><span class="o">:</span><span class="m">10</span>                <span class="c1"># integer</span>
f <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="m">1+0i</span><span class="p">,</span> <span class="m">2+4i</span><span class="p">)</span>       <span class="c1"># complex</span></code></pre></div>

<p>Empty vectors can be made using the <code>vector()</code> function</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">x <span class="o">&lt;-</span> <span class="kt">vector</span><span class="p">(</span><span class="s">&quot;numeric&quot;</span><span class="p">,</span> length<span class="o">=</span><span class="m">10</span><span class="p">)</span>
x</code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">##  [1] 0 0 0 0 0 0 0 0 0 0</code></pre></div>

<h1 id="lists">Lists</h1>

<p>A list is a special type of vector that can contain objects of different classes. For instance, we can have a list with a numeric dataframe as one object within the list, and a string vector as another. </p>

<div class="highlight"><pre><code class="language-r" data-lang="r">x <span class="o">&lt;-</span> <span class="kt">list</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="kc">TRUE</span><span class="p">,</span> <span class="m">1+4i</span><span class="p">)</span>
x</code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [[1]]
## [1] 1
## 
## [[2]]
## [1] &quot;a&quot;
## 
## [[3]]
## [1] TRUE
## 
## [[4]]
## [1] 1+4i</code></pre></div>

<p>The elements of a list are seperated by double brackets. </p>

<h1 id="matrices">Matrices</h1>

<p>Matrices are vectors with a dimension attribute. The <code>dim</code> attribute is an integer vector of length = 2 (nrow, ncol). Matrix multiplication is done with the %*% operator</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">x <span class="o">&lt;-</span> <span class="kt">matrix</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">6</span><span class="p">,</span> nrow<span class="o">=</span><span class="m">2</span><span class="p">,</span> ncol<span class="o">=</span><span class="m">3</span><span class="p">)</span>
x</code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kp">dim</span><span class="p">(</span>x<span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] 2 3</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kp">attributes</span><span class="p">(</span>x<span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## $dim
## [1] 2 3</code></pre></div>

<p>Matrices are constructed column-wise, so entries start at the upper left corner and run down the columns. </p>

<p>Matrices can be created directly from vectors by adding a dimension value</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">x <span class="o">&lt;-</span> <span class="m">1</span><span class="o">:</span><span class="m">10</span>

x</code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kp">dim</span><span class="p">(</span>x<span class="p">)</span> <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="m">5</span><span class="p">)</span>

x</code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    3    5    7    9
## [2,]    2    4    6    8   10</code></pre></div>

<p>We can also create matrices by column-binding or row-binding with the functions <code>cbind()</code> and <code>rbind()</code></p>

<div class="highlight"><pre><code class="language-r" data-lang="r">x <span class="o">&lt;-</span> <span class="m">1</span><span class="o">:</span><span class="m">3</span>
y <span class="o">&lt;-</span> <span class="m">10</span><span class="o">:</span><span class="m">12</span>
<span class="kp">cbind</span><span class="p">(</span>x<span class="p">,</span>y<span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">##      x  y
## [1,] 1 10
## [2,] 2 11
## [3,] 3 12</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r">rbind <span class="p">(</span>x<span class="p">,</span> y<span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">##   [,1] [,2] [,3]
## x    1    2    3
## y   10   11   12</code></pre></div>

<h1 id="factors">Factors</h1>

<p>Factors are used to represent catagorical data. They can be ordered or unordered.</p>

<ul>
  <li>They are like an integer vector where each integer has a label. </li>
  <li>Factors are more descriptive than integers e.g. “Male” and “Female” vs. 1 and 2</li>
  <li>Factors are treated specially by modelling functions like <code>lm()</code> and <code>glm()</code></li>
</ul>

<div class="highlight"><pre><code class="language-r" data-lang="r">x <span class="o">&lt;-</span> <span class="kp">factor</span><span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">&quot;yes&quot;</span><span class="p">,</span> <span class="s">&quot;yes&quot;</span><span class="p">,</span> <span class="s">&quot;no&quot;</span><span class="p">,</span> <span class="s">&quot;no&quot;</span><span class="p">,</span> <span class="s">&quot;yes&quot;</span><span class="p">))</span>
x</code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] yes yes no  no  yes
## Levels: no yes</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r">table <span class="p">(</span>x<span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## x
##  no yes 
##   2   3</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kp">unclass</span><span class="p">(</span>x<span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] 2 2 1 1 2
## attr(,&quot;levels&quot;)
## [1] &quot;no&quot;  &quot;yes&quot;</code></pre></div>

<h1 id="dataframe">Dataframe</h1>

<p>Dataframes are used in R to store tabular data. Dataframes are like matrices (meaning they have rows and columns) that can store different classes of objects in each column (e.g. numeric, character, logical, etc.).</p>

<p>Depending on the source of the data, dataframes can be made using the <code>read.table()</code>, <code>read.csv()</code> or <code>data.frame()</code> functions. </p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="p">(</span>x <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span>foo <span class="o">=</span> <span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">,</span> bar <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="bp">T</span><span class="p">,</span><span class="bp">T</span><span class="p">,</span><span class="bp">F</span><span class="p">,</span><span class="bp">F</span><span class="p">)))</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">##   foo   bar
## 1   1  TRUE
## 2   2  TRUE
## 3   3 FALSE
## 4   4 FALSE</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kp">nrow</span><span class="p">(</span>x<span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] 4</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kp">ncol</span><span class="p">(</span>x<span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] 2</code></pre></div>

<h1 id="attributes">Attributes</h1>

<p>R objects can have attributes, such as:</p>

<ul>
  <li>names</li>
  <li>classes</li>
  <li>lengths</li>
  <li>dimensions (matrices/dataframes)</li>
  <li>user defined attributes, such as metadata</li>
  <li>dataframes have a special attribute called <code>row.names</code></li>
</ul>

<p>Attributes can be modified with the <code>attributes()</code> function, among others.</p>

<p>For example, modifiying the <code>names</code> of a vector can make your code more readable.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">x <span class="o">&lt;-</span> <span class="m">1</span><span class="o">:</span><span class="m">3</span>
<span class="kp">names</span><span class="p">(</span>x<span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## NULL</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kp">names</span><span class="p">(</span>x<span class="p">)</span> <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;alpha&quot;</span><span class="p">,</span> <span class="s">&quot;beta&quot;</span><span class="p">,</span> <span class="s">&quot;gamma&quot;</span><span class="p">)</span>

x</code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## alpha  beta gamma 
##     1     2     3</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kp">names</span><span class="p">(</span>x<span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] &quot;alpha&quot; &quot;beta&quot;  &quot;gamma&quot;</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r">str<span class="p">(</span>x<span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">##  Named int [1:3] 1 2 3
##  - attr(*, &quot;names&quot;)= chr [1:3] &quot;alpha&quot; &quot;beta&quot; &quot;gamma&quot;</code></pre></div>

<h1 id="now-lets-code">Now let’s code!</h1>

<h1 id="starting-r">Starting R</h1>

<p>We will be using R studio for this course as it’s a user-friendly GUI for R. You can also access R from Terminal (Mac) or Command Line (Windows), if you please. </p>

<p>Download the airQuality.csv file from our <a href="https://github.com/codeasmanuscript/workshops/tree/master/lessons/rintro">Github repo</a> and import it into R using the <code>read.csv</code> function</p>

<h1 id="loop-functions">Loop Functions</h1>

<p>R has some very useful built-in loop functions. These functions have the word <code>apply</code> in them.</p>

<ul>
  <li><code>lapply</code>: loop over a list and evaluate a function on each element </li>
  <li><code>sapply</code>: same as <code>lapply</code> but it tries to simplify the result</li>
  <li><code>apply</code>: apply a function over the margins of an array </li>
  <li><code>tapply</code>: apply a function over subsets of a vector (<code>lapply()</code> used with <code>split()</code> does the same thing)</li>
  <li><code>mapply</code>: a multivariate version of <code>lapply</code> </li>
</ul>

<h1 id="lapply">lapply()</h1>

<p>Remember the function we made? It can be replaced with an <code>lapply()</code> loop.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kp">lapply</span><span class="p">(</span>airQuality<span class="p">,</span> <span class="kp">mean</span><span class="p">,</span> na.rm <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span></code></pre></div>

<h1 id="sapply">sapply()</h1>

<p>Alternatively we can try <code>sapply()</code>. This will return a named numeric vector (simpified from a list)</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kp">sapply</span><span class="p">(</span>airQuality<span class="p">,</span> <span class="kp">mean</span><span class="p">,</span> na.rm <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span></code></pre></div>

<h1 id="apply">apply()</h1>

<p><code>apply()</code> first coerces your dataframe to an array which means all the columns must have the same type. Because our dataframe does not meet this requirement, I’ll be taking a subset of the data. Normally this function would only be used with matrices.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kp">apply</span><span class="p">(</span>airQuality<span class="p">[,</span><span class="kt">c</span><span class="p">(</span><span class="m">-5</span><span class="p">)],</span> <span class="m">2</span><span class="p">,</span> sd<span class="p">,</span> na.rm <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>

<span class="kp">apply</span><span class="p">(</span>airQuality<span class="p">[,</span><span class="kt">c</span><span class="p">(</span><span class="m">-5</span><span class="p">)],</span> <span class="m">1</span><span class="p">,</span> sd<span class="p">,</span> na.rm <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span></code></pre></div>

<h1 id="mapply">mapply</h1>

<p><code>mapply</code> is a multivariate apply (like <code>lapply</code>) that applies a function over a set of arguments.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kp">mapply</span><span class="p">(</span><span class="kp">range</span><span class="p">,</span> airQuality<span class="p">[,</span><span class="kt">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">6</span><span class="p">)],</span> na.rm <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span></code></pre></div>

<h1 id="tapply">tapply</h1>

<p><code>tapply</code> is used to apply a function over subsets of a vector. It takes two arguements: a vector to apply to function on and a factor variable that subsets the vector. It will simplify the result, like sapply. </p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kp">tapply</span><span class="p">(</span>airQuality<span class="o">$</span>Ozone<span class="p">,</span> airQuality<span class="o">$</span>Month<span class="p">,</span> <span class="kp">range</span><span class="p">,</span> na.rm <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>

<span class="c1">## applying the range function on the Ozone column by the Month column.</span></code></pre></div>


</div>

    </div>

  </body>
</html>
